(function(e){function t(t){for(var a,s,i=t[0],l=t[1],u=t[2],c=0,d=[];c<i.length;c++)s=i[c],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);m&&m(t);while(d.length)d.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},o={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var m=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},"172d":function(e,t,r){},2:function(e,t){},"23af":function(e,t,r){"use strict";r("7504")},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("a026"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout",staticStyle:{height:"100%"}},[r("Layout",[r("navigation-bar"),r("Content",{style:{padding:"0 50px"}},[r("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}]})],1),r("Footer",{staticClass:"layout-footer-center"},[e._v("2020 © Yaning Li")])],1)],1)},n=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Menu",{attrs:{mode:"horizontal","active-name":"1-2"},on:{"on-select":e.click}},[r("Submenu",{attrs:{name:"1"}},[r("template",{slot:"title"},[e._v(" 作业 ")]),r("router-link",{attrs:{to:"/myhomeworknotdone/1"}},[r("MenuItem",{attrs:{name:"1-1"}},[e._v("未完成")])],1),r("router-link",{attrs:{to:"/"}},[r("MenuItem",{attrs:{name:"1-2"}},[e._v("我参与的")])],1),r("router-link",{attrs:{to:"/myhomeworkcreate/1"}},[r("MenuItem",{attrs:{name:"1-3"}},[e._v("我发布的")])],1),r("router-link",{attrs:{to:"/new"}},[r("MenuItem",{attrs:{name:"1-4 "}},[e._v("发布")])],1)],2),r("Submenu",{attrs:{name:"2"}},[r("template",{slot:"title"},[e._v(" 小组 ")]),r("router-link",{attrs:{to:"/groupjoin/1"}},[r("MenuItem",{attrs:{name:"2-1"}},[e._v("我加入的")])],1),r("router-link",{attrs:{to:"/groupcreate/1"}},[r("MenuItem",{attrs:{name:"2-2"}},[e._v("我创建的")])],1),r("router-link",{attrs:{to:"/newgroup"}},[r("MenuItem",{attrs:{name:"2-3"}},[e._v("创建")])],1),r("MenuItem",{attrs:{name:"2-4"}},[e._v("加入")])],2),e.logined?e._e():r("div",{attrs:{id:"login-button"}},[r("Button",{on:{click:e.login}},[e._v("登陆")]),r("Button",{on:{click:e.register}},[e._v("注册")])],1),r("login-modal",{key:e.timer_login,attrs:{show_parent:e.show_login},on:{loginClosed:e.loginClosed}}),r("join-modal",{key:e.timer_join,attrs:{show_parent:e.show_join},on:{joinClosed:e.joinClosed}}),r("register-modal",{key:e.timer_register,attrs:{show_parent:e.show_register},on:{registerClosed:e.registerClosed}}),e.logined?r("Submenu",{attrs:{name:"me",id:"me"}},[r("template",{slot:"title"},[e._v(e._s(e.name))]),r("router-link",{attrs:{to:"/me"}},[r("MenuItem",{attrs:{name:"4-1"}},[e._v("我")])],1),r("MenuItem",{attrs:{name:"4-2"},nativeOn:{click:function(t){return e.logout(t)}}},[r("span",[e._v("登出")])])],2):e._e()],1)],1)},i=[],l=(r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{attrs:{"mask-closable":!1},on:{"on-cancel":e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[r("FormItem",{staticStyle:{display:"inline"},attrs:{label:"组织id：",prop:"id"}},[r("i-Input",{attrs:{type:"text",inline:"",placeholder:"请输入组织id"},model:{value:e.formInline.id,callback:function(t){e.$set(e.formInline,"id",t)},expression:"formInline.id"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("br"),r("FormItem",{staticStyle:{display:"inline"},attrs:{label:"密码：",prop:"password"}},[r("i-Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:e.cancel}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading},on:{click:e.ok}},[e._v("加入")])],1)],1)],1)}),u=[],m={name:"JoinGroup",props:["show_parent"],data:function(){return{show:this.show_parent,loading:!1,formInline:{id:"",password:""},ruleInline:{id:[{required:!0,message:"该项必填",trigger:"change,blur"}],password:[{required:!0,message:"该项必填",trigger:"change,blur"}]}}},methods:{ok:function(){var e=this;this.$refs["formInline"].validate((function(t){t?(e.loading=!0,e.$api.post("mygroup/",{id:e.formInline.id,password:e.formInline.password},(function(t){if(200!=t.status)e.loading=!1,e.$Message.error("加入失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;0!=r.err_code?(e.$Message.error("加入失败，"+r.error),e.loading=!1):(r=r.data,e.$Message.success("加入成功"),e.show=!1,e.$emit("joinClosed"))}}))):e.$Message.error("请更正信息后提交")}))},cancel:function(){this.show=!1,this.$emit("joinClosed")}}},c=m,d=r("2877"),p=Object(d["a"])(c,l,u,!1,null,"589a7461",null),g=p.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{attrs:{"mask-closable":!1},on:{"on-cancel":e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[r("FormItem",{staticStyle:{display:"inline"},attrs:{label:"学号：",prop:"username"}},[r("i-Input",{attrs:{type:"text",inline:"",placeholder:"请输入学号"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,"username",t)},expression:"formInline.username"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("br"),r("FormItem",{staticStyle:{display:"inline"},attrs:{label:"密码：",prop:"password"}},[r("i-Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:e.cancel}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading},on:{click:e.ok}},[e._v("登陆")])],1)],1)],1)},h=[],_=(r("4d63"),r("ac1f"),r("25f0"),r("1c46")),v=r.n(_),b={name:"LoginModal",props:["show_parent"],data:function(){return{show:this.show_parent,loading:!1,formInline:{username:"",password:""},ruleInline:{username:[{required:!0,message:"请输入学号",trigger:"change,blur"},{validator:function(e,t,r){var a=new RegExp("^[0-9]{9,9}$");a.test(t)?r():r(!0)},message:"请输入正确的学号",trigger:"change,blur"}],password:[{required:!0,message:"请输入密码",trigger:"change,blur"},{validator:function(e,t,r){var a=new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z\\W]{6,18}$");a.test(t)?r():r(!0)},message:"密码必须为6-18位，只能包括数字、字母、特殊字符，且不能为纯字母、数字",trigger:"change,blur"}]}}},methods:{ok:function(){var e=this;this.$refs["formInline"].validate((function(t){t?(e.loading=!0,e.$api.post("login/",{username:e.formInline.username,password:e.setMd5(e.formInline.password)},(function(t){var r={logined:!1};if(console.log(t),200!=t.status)e.loading=!1,e.$Message.error("登陆失败，服务器错误"),e.$Message.error(""+t),console.log(t);else{var a=t.data;0!=a.err_code?(e.$Message.error("登陆失败"+a.error),e.loading=!1,e.$Message.error(a.error)):(a=a.data,1==a.result?(e.$Message.success("登陆成功"),e.show=!1,r.logined=!0,r.data=a,e.$emit("loginClosed",r)):(e.loading=!1,e.$Message.error(a.error)))}}))):(e.$Message.error("请更正信息后登陆"),e.$refs.modal.buttonLoading=!1)}))},cancel:function(){var e={logined:!1};this.show=!1,this.$emit("loginClosed",e)},setMd5:function(e){var t=v.a.createHash("md5");t.update(e);var r=t.digest("hex");return r}}},w=b,$=Object(d["a"])(w,f,h,!1,null,"dd60e5b0",null),I=$.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{attrs:{"mask-closable":!1},on:{"on-cancel":e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline,inline:""}},[r("FormItem",{staticStyle:{display:"inline"},attrs:{prop:"nickname"}},[r("i-Input",{attrs:{type:"text",placeholder:"请输入姓名"},model:{value:e.formInline.nickname,callback:function(t){e.$set(e.formInline,"nickname",t)},expression:"formInline.nickname"}},[r("Icon",{attrs:{slot:"prepend",type:"md-person"},slot:"prepend"})],1)],1),r("FormItem",{staticStyle:{display:"inline"},attrs:{prop:"user"}},[r("i-Input",{attrs:{type:"text",placeholder:"请输入学号"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("FormItem",{staticStyle:{display:"inline"},attrs:{prop:"password"}},[r("i-Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),r("FormItem",{staticStyle:{display:"inline"},attrs:{prop:"repassword"}},[r("i-Input",{attrs:{type:"password",placeholder:"请重新输入密码"},model:{value:e.formInline.repassword,callback:function(t){e.$set(e.formInline,"repassword",t)},expression:"formInline.repassword"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:e.cancel}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading},on:{click:e.ok}},[e._v("注册")])],1)],1)],1)},k=[],M={name:"LoginModal",props:["show_parent"],data:function(){var e=this;return{show:this.show_parent,loading:!1,error_msg:"",formInline:{user:"",email:"",password:"",nickname:"",repassword:""},ruleInline:{user:[{required:!0,message:"请输入学号",trigger:"change,blur"},{validator:function(e,t,r){var a=new RegExp("^[A-Z0-9]{5,15}$");a.test(t)?r():r(!0)},message:"学号只能包括数字、大写字母，且长度必须在5-15位",trigger:"change,blur"}],password:[{validator:function(e,t,r){var a=new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z\\W]{6,18}$");a.test(t)?r():r(!0)},message:"密码必须为6-18位，只能包括数字、字母、特殊字符",trigger:"change,blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"change,blur"},{validator:function(e,t,r){var a=new RegExp("^[一-龥·]{2,18}$");a.test(t)?r():r(!0)},message:"姓名只能为2-18位，且智能包含汉字和'·'",trigger:"change,blur"}],repassword:[{validator:function(t,r,a){r!=e.formInline.password?a(!0):a()},message:"两次输入的密码不一样",trigger:"change,blur"}]}}},methods:{ok:function(){var e=this;this.$refs["formInline"].validate((function(t){t?(e.loading=!0,e.$api.post("register/",{username:e.formInline.user,password:e.setMd5(e.formInline.password),nickname:e.formInline.nickname,email:e.formInline.email},(function(t){e.loading=!1;var r={registered:!0};if(200!=t.status)e.$Message.error("注册失败，服务器错误"),console.log(t),e.$Message.error(""+t);else{var a=t.data;0==a.err_code?(a=a.data,a.result?(e.show=!1,e.$Message.success("注册成功，请您登录"),e.$emit("registerClosed",r)):e.$Message.error(a.error)):e.$Message.error("请求失败"+a.error)}}))):(e.$Message.error("请更正信息后注册"),e.$refs.modal.buttonLoading=!1)}))},cancel:function(){var e={registered:!1};this.show=!1,this.$emit("registerClosed",e)},setMd5:function(e){var t=v.a.createHash("md5");t.update(e);var r=t.digest("hex");return r}}},x=M,D=Object(d["a"])(x,y,k,!1,null,null,null),j=D.exports,L={name:"NavigationBar",components:{"login-modal":I,"register-modal":j,"join-modal":g},data:function(){return{value:"",show_login:!1,show_join:!1,logined:!1,timer_login:"1",timer_join:"2",name:"",show_register:!1,timer_register:"3"}},created:function(){var e=this;this.$api.get("login/",{},(function(t){if(200==t.status){var r=t.data;0==r.err_code&&1==r.data.result&&(e.logined=!0,e.name=r.data.name,e.$Message.success(e.name+",欢迎回来"))}}))},methods:{login:function(){this.timer_login=(new Date).getTime(),this.show_login=!0},joinGroup:function(){this.timer_join=(new Date).getTime(),this.show_join=!0},loginClosed:function(e){var t=e.logined;1==t?(this.name=e.data.name,this.logined=!0):(this.show_login=!1,this.logined=!1)},joinClosed:function(e){this.show_join=!1},register:function(){this.timer_register=(new Date).getTime(),this.show_register=!0},registerClosed:function(e){var t=e.registered;1==t&&(this.show_register=!1)},click:function(e){"2-4"==e&&this.joinGroup()},logout:function(){var e=this;this.$api.get("logout/",{},(function(t){if(200!=t.status)e.$Message.error("操作失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;1==r.data.result&&(e.logined=!1,e.$Message.success("操作成功"))}}))}}},S=L,z=(r("8642"),Object(d["a"])(S,s,i,!1,null,"36b954b0",null)),F=z.exports,C={components:{"navigation-bar":F}},E=C,O=(r("23af"),Object(d["a"])(E,o,n,!1,null,"48fe8f6e",null)),B=O.exports,H=r("f825"),P=r.n(H),T=r("bc3a"),R=r.n(T),N=R.a.create({baseURL:"/api",withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},transformRequest:[function(e){var t="";for(var r in e)!0===Object.prototype.hasOwnProperty.call(e,r)&&(t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])+"&");return t}]});function U(e,t,r,a){N({method:e,url:t,data:"POST"===e||"PUT"===e||"DELETE"===e?r:null,params:"GET"===e?r:null}).then((function(e){a(e)})).catch((function(e){a(e)}))}var q={get:function(e,t,r){return U("GET",e,t,r)},post:function(e,t,r){return U("POST",e,t,r)},put:function(e,t,r){return U("PUT",e,t,r)},delete:function(e,t,r){return U("DELETE",e,t,r)}},G=(r("f8ce"),r("8c4f")),Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"me"}},[r("Layout",[r("Content",[r("List",{attrs:{border:""}},[r("ListItem",[r("div",{attrs:{id:"username"}},[e._v("学号："+e._s(e.user.username))])]),r("ListItem",[r("div",{attrs:{id:"name"}},[e._v("姓名："+e._s(e.user.name))])]),r("ListItem",[r("div",{attrs:{id:"last_login"}},[e._v("上次登录："+e._s(e.user.last_login))])]),r("ListItem",[r("div",{attrs:{id:"date_joined"}},[e._v("注册时间："+e._s(e.user.date_joined))])])],1)],1)],1)],1)},A=[],W={name:"Me",data:function(){return{user:""}},methods:{formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u}},created:function(){var e=this;this.$api.get("me/",{},(function(t){if(200==t.status){var r=t.data;0==r.err_code?(r=r.data,e.user=r,e.user.last_login=e.formatDate(new Date(r.last_login)),e.user.date_joined=e.formatDate(new Date(r.date_joined))):e.$Message.error(r.error)}else e.$Message.error("抱歉，发生错误"),e.$Message.error(""+t)}))}},J=W,Z=Object(d["a"])(J,Y,A,!1,null,"56b62172",null),X=Z.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"details"}},[r("Layout",[r("Layout",[r("Content",[r("Form",{ref:"form",attrs:{model:e.formItem,rules:e.rule}},[r("FormItem",{attrs:{label:"唯一作业id"}},[r("i-Input",{attrs:{disabled:""},model:{value:e.formItem.id,callback:function(t){e.$set(e.formItem,"id",t)},expression:"formItem.id"}})],1),r("FormItem",{attrs:{label:"作业名",prop:"name"}},[r("i-Input",{attrs:{placeholder:"请输入名称"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),r("FormItem",{attrs:{label:"提交类型",prop:"type"}},[r("Select",{model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},[r("Option",{attrs:{value:"file"}},[e._v("文件")])],1)],1),r("FormItem",{attrs:{label:"科目",prop:"subject"}},[r("i-Input",{attrs:{placeholder:"请输入科目"},model:{value:e.formItem.subject,callback:function(t){e.$set(e.formItem,"subject",t)},expression:"formItem.subject"}})],1),r("FormItem",{attrs:{label:"备注（可不填）",prop:"remark"}},[r("i-Input",{attrs:{type:"textarea",rows:5,placeholder:"请输入备注"},model:{value:e.formItem.remark,callback:function(t){e.$set(e.formItem,"remark",t)},expression:"formItem.remark"}})],1),r("FormItem",{attrs:{label:"截止时间"}},[r("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择截止日期"},model:{value:e.formItem.end_time,callback:function(t){e.$set(e.formItem,"end_time",t)},expression:"formItem.end_time"}})],1),e._v(" 参与小组： "),r("List",{attrs:{"item-layout":"vertical"}},e._l(e.formItem.groups,(function(t){return r("ListItem",{key:t.id},[r("router-link",{attrs:{to:"/groupdetails/"+t.id}},[e._v(e._s(t.name))])],1)})),1)],1),e.formItem.is_creater?r("Button",{staticStyle:{"margin-right":"1%"},attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submit()}}},[e._v("保存")]):r("Poptip",{staticStyle:{"margin-right":"1%"},attrs:{trigger:"hover",content:"您无权执行此操作"}},[r("Button",{attrs:{type:"primary",loading:e.loading,disabled:""},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1),e.formItem.is_creater?r("Button",{attrs:{type:"error"},on:{click:function(t){return e.del()}}},[e._v("删除")]):r("Poptip",{attrs:{trigger:"hover",content:"您无权执行此操作"}},[r("Button",{attrs:{type:"error",disabled:""},on:{click:function(t){return e.del()}}},[e._v("删除")])],1)],1)],1)],1)],1)},Q=[],V={name:"Details",data:function(){return{id:this.$route.params.id,loading:!1,formItem:{},rule:{name:[{required:!0,message:"该项必填",trigger:"change,blur"}],subject:[{required:!0,message:"该项必填",trigger:"change,blur"}]}}},created:function(){this.get()},watch:{$route:function(e){this.id=e.params.id,this.get()}},methods:{get:function(){var e=this;this.$api.get("homework/",{id:this.id},(function(t){if(200==t.status){var r=t.data;0==r.err_code?(r=r.data,e.formItem=r,r.member_can_know_donelist?e.formItem.member_can_know_donelist="true":e.formItem.member_can_know_donelist="false",r.member_can_see_others?e.formItem.member_can_see_others="true":e.formItem.member_can_see_others="false"):e.$Message.error(r.error)}else e.$Message.error("服务器错误"+t.data.err_code)}))},submit:function(){var e=this;this.$refs["form"].validate((function(t){t?(e.loading=!0,e.$api.put("homework/",{id:e.formItem.id,name:e.formItem.name,type:e.formItem.type,subject:e.formItem.subject,remark:e.formItem.remark,end_time:e.formatDate(e.formItem.end_time),member_can_know_donelist:e.formItem.member_can_know_donelist,member_can_see_others:e.formItem.member_can_see_others},(function(t){if(200!=t.status)e.loading=!1,e.$Message.error("提交失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;0!=r.err_code?(e.$Message.error("提交失败,"+r.error),e.loading=!1):(e.$Message.success("提交成功"),e.loading=!1)}}))):e.$Message.error("请更正信息后提交")}))},del:function(){var e=this;this.$api.delete("homework/",{id:this.formItem.id},(function(t){if(200!=t.status)e.$Message.error("删除失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;0!=r.err_code?e.$Message.error("删除失败"+r.error):(e.$Message.success("删除成功"),e.$router.go(-1))}}))},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u}}},ee=V,te=Object(d["a"])(ee,K,Q,!1,null,"0998184a",null),re=te.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"homework"}},[r("Layout",[r("Content",[r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[r("ListItemMeta",[r("template",{slot:"title"},[t.done?r("div",{staticStyle:{color:"green"}},[e._v(" "+e._s(t.name)+"(已完成) ")]):r("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(t.name)+"(未完成) ")])])],2),e._v(" 创建人:"+e._s(t.owner)+" "),r("br"),e._v(" 科目: "+e._s(t.subject)+" "),r("br"),e._v(" 截止时间："+e._s(e.formatDate(t.end_time))+" "),r("template",{slot:"action"},[r("Button",{attrs:{to:"../details/"+t.id}},[e._v("详细信息")]),r("Button",{on:{click:function(r){return e.toSubmit(t.id)}}},[e._v("提交")])],1)],2)})),1),r("div",{staticStyle:{"text-align":"center"}},[r("Page",{attrs:{current:e.page,total:e.total,"page-size":e.page_size},on:{"on-change":e.change_page}})],1)],1)],1)],1)},oe=[],ne=(r("a9e3"),{name:"HomeWork",data:function(){return{page_size:10,total:0,list_data:"",page:Number(this.$route.params.page)}},created:function(){var e=this;this.end=this.page_size,this.$api.get("myhomeworknum/",{status:"member"},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.total=t.data.data:e.$Message.error("请求失败，"+t.data.error)})),this.getData()},watch:{$route:function(e,t){this.page=Number(e.params.page),this.getData()}},methods:{getData:function(){var e=this;this.$api.get("myhomework/",{status:"member",start:(this.page-1)*this.page_size+1,end:this.page*this.page_size},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)}))},toSubmit:function(e){this.$router.push("/submit/"+e)},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u},change_page:function(e){this.$router.push("/myhomework/"+e)}}}),se=ne,ie=Object(d["a"])(se,ae,oe,!1,null,"70ab9cca",null),le=ie.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"homework-create"}},[r("Layout",[r("Content",[r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[r("ListItemMeta",{attrs:{title:t.name}}),e._v(" 创建人:"+e._s(t.owner)+" "),r("br"),e._v(" 科目: "+e._s(t.subject)+" "),r("br"),e._v(" 截止时间："+e._s(e.formatDate(t.end_time))+" "),r("template",{slot:"action"},[r("Button",{attrs:{to:"../details/"+t.id}},[e._v("详细信息")]),r("Button",{attrs:{to:"../export/"+t.id}},[e._v("完成情况")])],1)],2)})),1),r("div",{staticStyle:{"text-align":"center"}},[r("Page",{attrs:{current:e.page,total:e.total,"page-size":e.page_size},on:{"on-change":e.change_page}})],1)],1)],1)],1)},me=[],ce={name:"HomeWork",data:function(){return{page_size:10,total:0,list_data:"",page:Number(this.$route.params.page)}},created:function(){var e=this;this.end=this.page_size,this.$api.get("myhomeworknum/",{status:"owner"},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.total=t.data.data:e.$Message.error("请求失败，"+t.data.error)})),this.getData()},watch:{$route:function(e,t){this.page=Number(e.params.page),this.getData()}},methods:{getData:function(){var e=this;this.$api.get("myhomework/",{status:"owner",start:(this.page-1)*this.page_size+1,end:this.page*this.page_size},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)}))},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u},change_page:function(e){this.$router.push("/myhomeworkcreate/"+e)}}},de=ce,pe=Object(d["a"])(de,ue,me,!1,null,"488830ca",null),ge=pe.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"new"}},[r("Layout",[r("Content",[r("Form",{ref:"form",attrs:{model:e.formItem,rules:e.rule}},[r("FormItem",{attrs:{label:"作业名",prop:"name"}},[r("i-Input",{attrs:{placeholder:"请输入名称"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),r("FormItem",{attrs:{label:"提交类型"}},[r("Select",{model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},[r("Option",{attrs:{value:"file"}},[e._v("文件")])],1)],1),r("FormItem",{attrs:{label:"科目",prop:"subject"}},[r("i-Input",{attrs:{placeholder:"请输入科目"},model:{value:e.formItem.subject,callback:function(t){e.$set(e.formItem,"subject",t)},expression:"formItem.subject"}})],1),r("FormItem",{attrs:{label:"备注（可不填）"}},[r("i-Input",{attrs:{type:"textarea",rows:5,placeholder:"请输入备注"},model:{value:e.formItem.remark,callback:function(t){e.$set(e.formItem,"remark",t)},expression:"formItem.remark"}})],1),r("FormItem",{attrs:{label:"截止时间"}},[r("DatePicker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择截止日期"},model:{value:e.formItem.end_time,callback:function(t){e.$set(e.formItem,"end_time",t)},expression:"formItem.end_time"}})],1),r("FormItem",{attrs:{label:"选择参与组",prop:"groups"}},[r("Tooltip",{attrs:{"max-width":"300",content:"您创建作业选择组织，则组织内所有成员都视为参与本作业。若后续有成员加入组织，也会视为参与本次作业。当成员退出组织时，他不会退出本次作业，只是后续发布新作业已退出组员不再参加。"}},[r("Icon",{attrs:{type:"ios-help-circle"}})],1),r("CheckboxGroup",{on:{"on-change":function(t){return e.change_check()}},model:{value:e.formItem.groups,callback:function(t){e.$set(e.formItem,"groups",t)},expression:"formItem.groups"}},[r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[r("Checkbox",{attrs:{label:t.id}},[r("span",[e._v(e._s(t.name))])])],1)})),1)],1),r("div",{staticStyle:{"text-align":"center"}},[r("Page",{attrs:{current:e.page,total:e.total,"page-size":e.page_size},on:{"on-change":e.change_page}})],1)],1),r("FormItem",[r("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submit()}}},[e._v("发布")])],1)],1)],1)],1)],1)},he=[],_e={name:"New",data:function(){return{page_size:10,total:0,list_data:"",page:1,loading:!1,formItem:{name:"",type:"file",subject:"",remark:"",end_time:new Date,member_can_know_donelist:"false",member_can_see_others:"false",groups:[]},rule:{name:[{required:!0,message:"该项必填",trigger:"change,blur"}],subject:[{required:!0,message:"该项必填",trigger:"change,blur"}],groups:[{validator:function(e,t,r){t.length?r():r(!0)},message:"请至少选择一个小组",trigger:"change,blur"}]}}},created:function(){var e=this;this.end=this.page_size,this.$api.get("mygroupnum/",{status:"can_use"},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.total=t.data.data:e.$Message.error("请求失败，"+t.data.error)})),this.getData()},methods:{change_check:function(){console.log(this.formItem.groups)},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u},getData:function(){var e=this;this.$api.get("mygroup/",{status:"can_use",start:(this.page-1)*this.page_size+1,end:this.page*this.page_size},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)}))},submit:function(){var e=this;this.$refs["form"].validate((function(t){t?(e.loading=!0,e.$api.post("homework/",{name:e.formItem.name,type:e.formItem.type,subject:e.formItem.subject,remark:e.formItem.remark,end_time:e.formatDate(e.formItem.end_time),member_can_know_donelist:e.formItem.member_can_know_donelist,member_can_see_others:e.formItem.member_can_see_others,groups:e.formItem.groups},(function(t){if(200!=t.status)e.loading=!1,e.$Message.error("提交失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;if(0!=r.err_code)e.$Message.error("提交失败，"+r.error),e.loading=!1;else{e.$Message.success("提交成功"),e.loading=!1;var a=t.data.data.id;e.$router.push("details/"+a)}}}))):e.$Message.error("请更正信息后提交")}))},change_page:function(e){this.page=e,this.getData()}}},ve=_e,be=Object(d["a"])(ve,fe,he,!1,null,"1ec6a59f",null),we=be.exports,$e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"submit"}},[r("br"),r("h1",{staticStyle:{"font-family":"'微软雅黑'"}},[e._v(" 上传文件到作业："+e._s(e.work.work_name)+" ")]),r("Upload",{ref:"upload",attrs:{disabled:""==e.work,"before-upload":e.handleUpload,data:{work_id:this.work_id},type:"drag",action:"api/submit/","max-size":10240,"on-exceeded-size":e.exceededMaxsize,"on-success":e.handleSuccess,"on-error":e.handleError,"show-upload-list":!1}},[r("div",{staticStyle:{padding:"20px 0"}},[r("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),r("p",[e._v("点击或拖拽文件到此处")])],1)]),e.work.done?r("div",[e._v(" 已上传文件: "),r("a",{on:{click:function(t){return e.download()}}},[e._v(e._s(e.work.file_name)+" ")]),r("br"),e._v(" "+e._s(this.formatDate(e.work.upload_time))+" 上传 ")]):e._e(),e.work.done?e._e():r("h3",[e._v("您还未上传过")])],1)},Ie=[],ye=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),{name:"Submit",data:function(){return{work:"",work_id:this.$route.params.work_id}},created:function(){this.get()},watch:{$route:function(e){this.work_id=e.params.work_id,this.get()}},methods:{get:function(){var e=this;this.$api.get("submit/",{work_id:this.work_id},(function(t){if(200==t.status){var r=t.data;0==r.err_code?(r=r.data,e.work=r):e.$Message.error(r.error)}else e.$Message.error("服务器错误"+t.data.err_code)}))},handleUpload:function(e){return this.$Loading.start(),this.$refs.upload.post(e),!1},download:function(){var e=this;this.$api.get("download/",{work_id:this.work_id,status:"status"},(function(t){if(200!=t.status)e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;0!=r.err_code?e.$Message.error(r.error):R.a.get("api/download/?work_id="+String(e.work_id),{responseType:"blob"}).then((function(t){var r=e.work.file_name,a=t.headers["content-type"];if("application/octet-stream"==a){var o=new Blob([t.data]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download=r,n.style.display="none",n.href=URL.createObjectURL(o),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(o,r)}else e.$Message.error("下载失败，未知错误")})).catch((function(t){e.$Message.error("下载失败，服务器错误"),e.$Message.error(t.message)}))}}))},exceededMaxsize:function(e,t){this.$Message.error("文件最大为10MB"),this.$Loading.error()},handleSuccess:function(e,t,r){0==e.err_code?(this.get(),this.$Message.success("上传成功"),this.$Loading.finish()):(this.$Message.error("上传失败,"+e.error),this.$Loading.error())},handleError:function(e,t,r){this.$Message.error("上传失败,"+e),this.$Loading.error()},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u}}}),ke=ye,Me=Object(d["a"])(ke,$e,Ie,!1,null,"4043874a",null),xe=Me.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"new-group"}},[r("Layout",[r("Content",[r("Form",{ref:"form",attrs:{model:e.formItem,rules:e.rule}},[r("FormItem",{attrs:{label:"组织名",prop:"name"}},[r("i-Input",{attrs:{placeholder:"请输入组织名"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),r("FormItem",{attrs:{label:"加入密码(该项对成员不可见）",prop:"password"}},[r("i-Input",{attrs:{placeholder:"请输入组织加入密码"},model:{value:e.formItem.password,callback:function(t){e.$set(e.formItem,"password",t)},expression:"formItem.password"}})],1),r("FormItem",{attrs:{label:" 成员可用该组织创建作业",prop:"member_can_use"}},[r("Tooltip",{attrs:{"max-width":"300",content:"对于常用、其他人可用组织，建议开启此功能。例如一个班级，如果开启此功能，所有人都可以用此组织创建作业，否则每人都要创建一个班级组织"}},[r("Icon",{attrs:{type:"ios-help-circle"}})],1),r("i-switch",{model:{value:e.formItem.member_can_use,callback:function(t){e.$set(e.formItem,"member_can_use",t)},expression:"formItem.member_can_use"}})],1),r("FormItem",{attrs:{label:"说明（可不填）"}},[r("i-Input",{attrs:{type:"textarea",rows:5,placeholder:"请输入备注"},model:{value:e.formItem.desc,callback:function(t){e.$set(e.formItem,"desc",t)},expression:"formItem.desc"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},je=[],Le={name:"New",data:function(){return{loading:!1,formItem:{name:"",desc:"",password:"",member_can_use:!1},rule:{name:[{required:!0,message:"该项必填",trigger:"change,blur"}],password:[{required:!0,message:"该项必填",trigger:"change,blur"},{validator:function(e,t,r){var a=new RegExp("^[0-9a-zA-Z]{6,18}$");a.test(t)?r():r(!0)},message:"密码必须为6-18位，只能包括数字、字母",trigger:"change,blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t?(e.loading=!0,e.$api.post("group/",{name:e.formItem.name,desc:e.formItem.desc,password:e.formItem.password,member_can_use:e.formItem.member_can_use},(function(t){if(200!=t.status)e.loading=!1,e.$Message.error("提交失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;if(0!=r.err_code)e.$Message.error("提交失败,"+r.error),e.loading=!1;else{e.$Message.success("提交成功"),e.loading=!1;var a=t.data.data.id;e.$router.push("groupdetails/"+a)}}}))):e.$Message.error("请更正信息后提交")}))}}},Se=Le,ze=Object(d["a"])(Se,De,je,!1,null,"d53c7e5e",null),Fe=ze.exports,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"new-group"}},[r("Layout",[r("Content",[r("Form",{ref:"form",attrs:{model:e.formItem,rules:e.rule}},[r("FormItem",{attrs:{label:"组织id(id作为唯一组织标识不可更改)"}},[r("i-Input",{attrs:{disabled:""},model:{value:e.formItem.id,callback:function(t){e.$set(e.formItem,"id",t)},expression:"formItem.id"}})],1),r("FormItem",{attrs:{label:"组织名",prop:"name"}},[r("i-Input",{attrs:{placeholder:"请输入组织名"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),r("FormItem",{attrs:{label:"加入密码(该项对成员不可见）",prop:"password"}},[r("i-Input",{attrs:{placeholder:"请输入组织加入密码"},model:{value:e.formItem.password,callback:function(t){e.$set(e.formItem,"password",t)},expression:"formItem.password"}})],1),r("FormItem",{attrs:{label:" 成员可用该组织创建作业",prop:"member_can_use"}},[r("Tooltip",{attrs:{"max-width":"300",content:"对于常用、其他人可用组织，建议开启此功能。例如一个班级，如果开启此功能，所有人都可以用此组织创建作业，否则每人都要创建一个班级组织"}},[r("Icon",{attrs:{type:"ios-help-circle"}})],1),r("i-switch",{model:{value:e.formItem.member_can_use,callback:function(t){e.$set(e.formItem,"member_can_use",t)},expression:"formItem.member_can_use"}})],1),r("FormItem",{attrs:{label:"说明（可不填）"}},[r("i-Input",{attrs:{type:"textarea",rows:5,placeholder:"请输入备注"},model:{value:e.formItem.desc,callback:function(t){e.$set(e.formItem,"desc",t)},expression:"formItem.desc"}})],1),r("FormItem",{attrs:{label:"创建人"}},[r("i-Input",{attrs:{disabled:""},model:{value:e.formItem.owner,callback:function(t){e.$set(e.formItem,"owner",t)},expression:"formItem.owner"}})],1),r("FormItem",{attrs:{label:"创建时间"}},[r("DatePicker",{attrs:{disabled:"",type:"datetime",format:"yyyy-MM-dd HH:mm"},model:{value:e.formItem.create_time,callback:function(t){e.$set(e.formItem,"create_time",t)},expression:"formItem.create_time"}})],1),r("FormItem",[e.formItem.is_owner?r("Button",{staticStyle:{"margin-right":"1%"},attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submit()}}},[e._v("保存")]):r("Poptip",{staticStyle:{"margin-right":"1%"},attrs:{trigger:"hover",content:"您无权执行此操作"}},[r("Button",{attrs:{type:"primary",loading:e.loading,disabled:""},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1),e.formItem.is_owner?r("Button",{attrs:{type:"error"},on:{click:function(t){return e.del()}}},[e._v("删除")]):r("Poptip",{attrs:{trigger:"hover",content:"您无权执行此操作"}},[r("Button",{attrs:{type:"error",disabled:""},on:{click:function(t){return e.del()}}},[e._v("删除")])],1)],1)],1)],1)],1)],1)},Ee=[],Oe={name:"New",data:function(){return{id:this.$route.params.id,loading:!1,formItem:{},rule:{name:[{required:!0,message:"该项必填",trigger:"change,blur"}],subject:[{required:!0,message:"该项必填",trigger:"change,blur"}],password:[{required:!0,message:"该项必填",trigger:"change,blur"}]}}},watch:{$route:function(e){this.id=e.params.id,this.get()}},created:function(){this.get()},methods:{get:function(){var e=this;this.$api.get("group/",{id:this.id},(function(t){if(200==t.status){var r=t.data;0==r.err_code?(r=r.data,e.formItem=r):e.$Message.error(r.error)}else e.$Message.error("服务器错误"+t.data.err_code)}))},del:function(){var e=this;this.$api.delete("group/",{id:this.formItem.id},(function(t){if(200!=t.status)e.$Message.error("删除失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;0!=r.err_code?e.$Message.error("删除失败"+r.error):(e.$Message.success("删除成功"),e.$router.go(-1))}}))},submit:function(){var e=this;this.$refs["form"].validate((function(t){t?(e.loading=!0,e.$api.put("group/",{id:e.formItem.id,name:e.formItem.name,desc:e.formItem.desc,password:e.formItem.password,member_can_user:e.formItem.member_can_user},(function(t){if(200!=t.status)e.loading=!1,e.$Message.error("提交失败，服务器错误"),e.$Message.error(""+t);else{var r=t.data;0!=r.err_code?(e.$Message.error("提交失败"+r.error),e.loading=!1):(e.$Message.success("提交成功"),e.loading=!1)}}))):e.$Message.error("请更正信息后提交")}))}}},Be=Oe,He=Object(d["a"])(Be,Ce,Ee,!1,null,"17fa2eec",null),Pe=He.exports,Te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"group-create"}},[r("Layout",[r("Content",[r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[r("ListItemMeta",{attrs:{title:t.name}}),e._v(" 创建时间："+e._s(e.formatDate(t.create_time))+" "),r("template",{slot:"action"},[r("Button",{attrs:{to:"../groupdetails/"+t.id}},[e._v("详细信息")]),r("Button",{attrs:{to:"../groupmembers/"+t.id}},[e._v("成员管理")])],1)],2)})),1),r("div",{staticStyle:{"text-align":"center"}},[r("Page",{attrs:{current:e.page,total:e.total,"page-size":e.page_size},on:{"on-change":e.change_page}})],1)],1)],1)],1)},Re=[],Ne={name:"GroupCreate",data:function(){return{page_size:10,total:0,list_data:"",page:Number(this.$route.params.page)}},created:function(){var e=this;this.end=this.page_size,this.$api.get("mygroupnum/",{status:"owner"},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.total=t.data.data:e.$Message.error("请求失败，"+t.data.error)})),this.getData()},watch:{$route:function(e,t){this.page=Number(e.params.page),this.getData()}},methods:{getData:function(){var e=this;this.$api.get("mygroup/",{status:"owner",start:(this.page-1)*this.page_size+1,end:this.page*this.page_size},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)}))},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u},change_page:function(e){this.$router.push("/groupcreate/"+e)}}},Ue=Ne,qe=Object(d["a"])(Ue,Te,Re,!1,null,"f264842a",null),Ge=qe.exports,Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"group-create"}},[r("Layout",[r("Content",[r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[r("ListItemMeta",{attrs:{title:t.name}}),e._v(" 创建人:"+e._s(t.owner)+" "),r("br"),e._v(" 加入时间："+e._s(e.formatDate(t.time))+" "),r("template",{slot:"action"},[r("Button",{attrs:{to:"../groupdetails/"+t.id}},[e._v("详细信息")])],1)],2)})),1),r("div",{staticStyle:{"text-align":"center"}},[r("Page",{attrs:{current:e.page,total:e.total,"page-size":e.page_size},on:{"on-change":e.change_page}})],1)],1)],1)],1)},Ae=[],We={name:"GroupJoin",data:function(){return{page_size:10,total:0,list_data:"",page:Number(this.$route.params.page)}},created:function(){var e=this;this.end=this.page_size,this.$api.get("mygroupnum/",{status:"member"},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.total=t.data.data:e.$Message.error("请求失败，"+t.data.error)})),this.getData()},watch:{$route:function(e,t){this.page=Number(e.params.page),this.getData()}},methods:{getData:function(){var e=this;this.$api.get("mygroup/",{status:"member",start:(this.page-1)*this.page_size+1,end:this.page*this.page_size},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)}))},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u},change_page:function(e){this.$router.push("/groupjoin/"+e)}}},Je=We,Ze=Object(d["a"])(Je,Ye,Ae,!1,null,"9f1927be",null),Xe=Ze.exports,Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"group-create"}},[r("Layout",[r("Content",[r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[r("ListItemMeta",{attrs:{title:t.name,description:t.username}}),r("template",{slot:"action"},[r("Button",{attrs:{type:"error"},on:{click:function(r){return e.del(t.id)}}},[e._v("删除")])],1)],2)})),1)],1)],1)],1)},Qe=[],Ve={name:"GroupMembers",data:function(){return{list_data:"",id:this.$route.params.id}},created:function(){this.getData()},watch:{$route:function(e,t){this.id=Number(e.params.id),this.getData()}},methods:{getData:function(){var e=this;this.$api.get("groupmembers/",{id:this.id},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)}))},del:function(e){var t=this;this.$api.delete("groupmembers/",{group_id:this.id,user_id:e},(function(e){200!=e.status?(t.$Message.error("请求失败，服务器错误"),t.$Message.error(""+e)):0==e.data.err_code?t.$Message.success("删除成功"):t.$Message.error("请求失败，"+e.data.error)}))}}},et=Ve,tt=Object(d["a"])(et,Ke,Qe,!1,null,"14257dda",null),rt=tt.exports,at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"homework-not-done"}},[r("Layout",[r("Content",[r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[r("ListItemMeta",[r("template",{slot:"title"},[t.done?r("div",{staticStyle:{color:"green"}},[e._v(" "+e._s(t.name)+"(已完成) ")]):r("div",{staticStyle:{color:"red"}},[e._v(e._s(t.name)+"(未完成)")])])],2),e._v(" 创建人:"+e._s(t.owner)+" "),r("br"),e._v(" 科目: "+e._s(t.subject)+" "),r("br"),e._v(" 截止时间："+e._s(e.formatDate(t.end_time))+" "),r("template",{slot:"action"},[r("Button",{attrs:{to:"../details/"+t.id}},[e._v("详细信息")]),r("Button",{on:{click:function(r){return e.toSubmit(t.id)}}},[e._v("提交")])],1)],2)})),1),r("div",{staticStyle:{"text-align":"center"}},[r("Page",{attrs:{current:e.page,total:e.total,"page-size":e.page_size},on:{"on-change":e.change_page}})],1)],1)],1)],1)},ot=[],nt={name:"HomeWork",data:function(){return{page_size:10,total:0,list_data:"",page:Number(this.$route.params.page)}},created:function(){var e=this;this.end=this.page_size,this.$api.get("myhomeworknum/",{status:"notdone"},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.total=t.data.data:e.$Message.error("请求失败，"+t.data.error)})),this.getData()},watch:{$route:function(e,t){this.page=Number(e.params.page),this.getData()}},methods:{getData:function(){var e=this;this.$api.get("myhomework/",{status:"notdone",start:(this.page-1)*this.page_size+1,end:this.page*this.page_size},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)}))},toSubmit:function(e){this.$router.push("/submit/"+e)},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u},change_page:function(e){this.$router.push("/myhomework/"+e)}}},st=nt,it=Object(d["a"])(st,at,ot,!1,null,"458cc0dd",null),lt=it.exports,ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"export"}},[r("h2",[e._v("作业“"+e._s(e.work.name)+"”的完成情况")]),r("Button",{attrs:{type:"primary",loading:e.export_loading},on:{click:function(t){return e.exportAll()}}},[e._v("一键导出")]),r("List",{attrs:{"item-layout":"vertical"}},e._l(e.list_data,(function(t){return r("ListItem",{key:t.id},[t.done?r("template",{slot:"action"},[r("li",[r("a",{on:{click:function(r){return e.download(t)}}},[e._v(e._s(t.file_name))])])]):e._e(),t.done?r("div",[r("ListItemMeta",{attrs:{description:e.formatDate(t.upload_time)+"上传"}},[r("template",{slot:"title"},[r("div",{staticStyle:{color:"green"}},[e._v(e._s(t.owner.name)+"(已完成)")])])],2)],1):r("div",[r("ListItemMeta",[r("template",{slot:"title"},[r("div",{staticStyle:{color:"red"}},[e._v(e._s(t.owner.name)+"(未完成)")])])],2)],1)],2)})),1)],1)},mt=[],ct={name:"Export",data:function(){return{work_id:this.$route.params.work_id,list_data:"",work:"",export_loading:!1}},watch:{$route:function(e){this.work_id=e.params.work_id,this.getData()}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$api.get("donelist/",{work_id:this.work_id},(function(t){200!=t.status?(e.$Message.error("请求失败，服务器错误"),e.$Message.error(""+t)):0==t.data.err_code?e.list_data=t.data.data:e.$Message.error("请求失败，"+t.data.error)})),this.$api.get("homework/",{id:this.work_id},(function(t){if(200==t.status){var r=t.data;0==r.err_code?(r=r.data,e.work=r):e.$Message.error(r.error)}else e.$Message.error("服务器错误"+t.data.err_code)}))},exportAll:function(){var e=this;this.export_loading=!0,this.$api.get("export/",{work_id:this.work_id,status:"status"},(function(t){var r=t.data;if(0!=r.err_code)return e.$Message.error("请求失败"),e.$Message.error(""+r.error),void(e.export_loading=!1);e.$Message.success("请求成功，后台正在处理，请耐心等待")})),this.$worker.run((function(e){var t=!1;while(!t){var r=new XMLHttpRequest;if(r.open("GET","http://117.51.141.73/api/export/?work_id="+String(e)+"&status=status",!1),r.send(),4!=r.readyState)return"网络错误";if(200!=r.status)return"请求失败，服务器错误";var a=JSON.parse(String(r.responseText));if(0!=a["err_code"])return a["error"];if(a["done"])return 1;var o=new Date,n=o.getTime()+2e3;console.log(n),console.log(o);while(o.getTime()<n)o=new Date}}),[this.work_id]).then((function(t){1==t?R.a.get("api/export/?work_id="+String(e.work_id),{responseType:"blob"}).then((function(t){var r=e.work.name+".zip",a=t.headers["content-type"];if("application/octet-stream"==a){var o=new Blob([t.data]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download=r,n.style.display="none",n.href=URL.createObjectURL(o),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(o,r)}else e.$Message.error("导出失败，未知错误")})).catch((function(t){e.$Message.error("下载失败，服务器错误"),e.$Message.error(t.message)})):0!=t&&e.$Message.error(t),e.export_loading=!1}))},download:function(e){var t=this,r=e.owner.id,a=e.file_name;this.$api.get("export/",{work_id:this.work_id,user_id:r,file_name:a,status:"status"},(function(e){if(200!=e.status)t.$Message.error("请求失败，服务器错误"),t.$Message.error(""+e);else{var o=e.data;0!=o.err_code?t.$Message.error(o.error):R.a.get("api/export/?work_id="+String(t.work_id)+"&user_id="+String(r)+"&file_name="+String(a),{responseType:"blob"}).then((function(e){var r=e.headers["content-type"];if("application/octet-stream"==r){var o=new Blob([e.data]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download=a,n.style.display="none",n.href=URL.createObjectURL(o),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(o,a)}else t.$Message.error("导出失败，未知错误")})).catch((function(e){t.$Message.error("下载失败，服务器错误"),t.$Message.error(e.message)}))}}))},formatDate:function(e){if(!e)return"-";function t(e){return e>9?e:"0"+e}var r=new Date(e),a=r.getFullYear(),o=t(r.getMonth()+1),n=t(r.getDate()),s=t(r.getHours()),i=t(r.getMinutes()),l=t(r.getSeconds()),u=a+"-"+o+"-"+n+" "+s+":"+i+":"+l;return u}}},dt=ct,pt=Object(d["a"])(dt,ut,mt,!1,null,"1429f96f",null),gt=pt.exports;a["default"].use(G["a"]);var ft=new G["a"]({routes:[{path:"/",redirect:"myhomework"},{path:"/myhomework",redirect:"/myhomework/1"},{path:"/me",name:"Me",component:X,meta:{title:"我"}},{path:"/new",name:"New",component:we,meta:{title:"新建作业"}},{path:"/details/:id",name:"Details",component:re,meta:{title:"作业详情"}},{path:"/myhomework/:page",name:"MyHomeWork",component:le,meta:{title:"我的作业"}},{path:"/myhomeworkcreate/:page",name:"MyHomeWorkCreate",component:ge,meta:{title:"我发布的作业"}},{path:"/submit/:work_id",name:"Submit",component:xe,meta:{title:"提交作业"}},{path:"/newgroup",name:"NewGroup",component:Fe,meta:{title:"创建小组"}},{path:"/groupdetails/:id",name:"GroupDetails",component:Pe,meta:{title:"组织信息"}},{path:"/groupcreate/:page",name:"GroupCreate",component:Ge,meta:{title:"我创建的组织"}},{path:"/groupjoin/:page",name:"GroupJoin",component:Xe,meta:{title:"我加入的组织"}},{path:"/groupmembers/:id",name:"GroupMembers",component:rt,meta:{title:"成员管理"}},{path:"/myhomeworknotdone/:page",name:"MyHomeWorkNotDone",component:lt,meta:{title:"未完成的作业"}},{path:"/export/:work_id",name:"Export",component:gt,meta:{title:"导出"}}]}),ht=r("7876"),_t=r.n(ht),vt=r("28bd");a["default"].use(vt["a"]),a["default"].use(_t.a),a["default"].prototype.$api=q,a["default"].use(P.a),a["default"].use(G["a"]),a["default"].config.productionTip=!1,new a["default"]({el:"#app",router:ft,components:{App:B},template:"<App/>"})},6:function(e,t){},7:function(e,t){},7504:function(e,t,r){},8:function(e,t){},8642:function(e,t,r){"use strict";r("172d")},9:function(e,t){}});
//# sourceMappingURL=app.9c49e4aa.js.map